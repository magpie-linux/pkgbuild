pkgname=flash-drive-tool
_pkgname=Flash-Drive-Tool-master
pkgver=3.0
pkgrel=2
pkgdesc="Format pendrive or create bootable usb easily"
arch=('x86_64')
url="https://github.com/Rizwan-Hasan/Flash-Drive-Tool"
license=('GPL')
depends=('desktop-file-utils' 'dosfstools' 'python2-dbus' 'python2-gobject' 'python2-pyparted' 'python2-xapp' 'udisks2' 'xapps')
optdepends=('dosfstools: FAT filesystems' 'e2fsprogs: Ext filesystems' 'ntfs-3g: NTFS filesystems')
makedepends=('git')
provides=($pkgname)
conflicts=('mintstick' 'mintstick-git')
source=('flash-drive-tool.tar.gz::https://github.com/Rizwan-Hasan/Flash-Drive-Tool/archive/master.tar.gz')
md5sums=('d881c4ae32779692ce2e40bb33375fbf')

prepare() {
  cd $_pkgname
  sed -i 's| /usr| "'$pkgdir'"/usr|g' install.sh
}

package() {
  install -d "$pkgdir/usr/bin"
  install -d "$pkgdir/usr/share/applications"
  install -d "$pkgdir/usr/share/pixmaps"
  install -d "$pkgdir/usr/share/kde4/apps/solid/actions"
  install -d "$pkgdir/usr/share/polkit-1/actions"
  cd $_pkgname
  ./install.sh
  chmod +x $pkgdir/usr/share/applications/*.desktop
  rm -rfv "$pkgdir/usr/share/flash-drive-tool"
}

